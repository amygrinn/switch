@use 'sass:meta';

/**
 * @param {string} $name The name of the switch
 * @param {...string} $states A list of states the switch can be in
 */
@mixin switch($name, $states...) {
  @each $state in $states {
    &[data-#{$name}-#{$state}],
    & [data-#{$name}-#{$state}] {
      // State named $state is currently active

      /**
       * Hide any elements with the data-$name attribute that has the '!$state' exclusionary syntax
       * in its value
       */
      [data-#{$name}~='!#{$state}'],

      /**
       * If any elements with the data-$name attribute does not have $state in its value, nor is
       * the value using the exclusionary syntax, then hide it
       */
      [data-#{$name}]:not([data-#{$name}~='#{$state}']):not([data-#{$name}*='!']) {
        @if (content-exists()) {
          // Let mixin consumer override default inactive state styles
          @content;
        } @else {
          display: none;
          pointer-events: none;
        }
      }
    }
  }
}
